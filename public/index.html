<!DOCTYPE html>
<html>
<head>
  <title>GlentechKenya Dev Builder</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #0b1120;
      color: white;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      background: #111827;
      padding: 12px 20px;
      font-weight: bold;
      color: #00ffcc;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    button {
      padding: 8px 16px;
      background: #00ffcc;
      border: none;
      font-weight: bold;
      cursor: pointer;
      border-radius: 5px;
    }

    .main {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    textarea {
      width: 50%;
      padding: 15px;
      background: #0f172a;
      color: #00ffcc;
      border: none;
      outline: none;
      font-family: monospace;
      font-size: 14px;
      resize: none;
    }

    .right-panel {
      width: 50%;
      display: flex;
      flex-direction: column;
      background: white;
    }

    iframe {
      flex: 3;
      border: none;
      background: white;
    }

    .console {
      flex: 1;
      background: black;
      color: #00ff00;
      font-family: monospace;
      font-size: 13px;
      padding: 10px;
      overflow-y: auto;
      border-top: 2px solid #111;
    }

    .console-title {
      color: #00ffcc;
      margin-bottom: 5px;
    }
  </style>
</head>
<body>

<header>
  üöÄ GlentechKenya Dev Builder
  <button onclick="runCode()">‚ñ∂ Run Code</button>
</header>

<div class="main">
  <textarea id="codeArea">
<!DOCTYPE html>
<html>
<head>
  <style>
    body { background: black; color: lime; text-align: center; font-family: Arial; }
  </style>
</head>
<body>
  <h1>GlentechKenya Dev Builder üåç</h1>
  <script>
    console.log("Hello from GlentechKenya console!");
  </script>
</body>
</html>
  </textarea>

  <div class="right-panel">
    <iframe id="preview"></iframe>
    <div class="console" id="console">
      <div class="console-title">Console Output:</div>
    </div>
  </div>
</div>

<script>
function runCode() {
  const code = document.getElementById("codeArea").value;
  const previewFrame = document.getElementById("preview");
  const consoleDiv = document.getElementById("console");

  // Clear console
  consoleDiv.innerHTML = '<div class="console-title">Console Output:</div>';

  // Create a custom console log catcher
  const consoleScript = `
    <script>
      const oldLog = console.log;
      console.log = function(message) {
        parent.postMessage({ type: 'log', message }, '*');
        oldLog(message);
      };
      window.onerror = function(msg, url, line, col, error) {
        parent.postMessage({ type: 'error', message: msg }, '*');
      };
    <\/script>
  `;

  const finalCode = code.replace("</body>", consoleScript + "</body>");

  const preview = previewFrame.contentWindow.document;
  preview.open();
  preview.write(finalCode);
  preview.close();
}

// Listen for console messages from iframe
window.addEventListener("message", function(event) {
  const consoleDiv = document.getElementById("console");

  if (event.data.type === "log") {
    consoleDiv.innerHTML += `<div>> ${event.data.message}</div>`;
  }

  if (event.data.type === "error") {
    consoleDiv.innerHTML += `<div style="color:red;">‚ùå ${event.data.message}</div>`;
  }

  consoleDiv.scrollTop = consoleDiv.scrollHeight;
});
</script>

</body>
</html>
