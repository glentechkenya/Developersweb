<!DOCTYPE html>
<html>
<head>
  <title>GlentechKenya Dev Playground</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #0d1117;
      color: white;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    h2 {
      margin: 10px 15px 5px;
      color: #00ffcc;
      font-size: 16px;
    }

    textarea {
      margin: 0 15px;
      height: 40%;
      background: #161b22;
      color: #00ffcc;
      border: 1px solid #30363d;
      border-radius: 6px;
      padding: 10px;
      font-family: monospace;
      font-size: 14px;
      resize: none;
      outline: none;
    }

    .run-area {
      margin: 10px 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    button {
      padding: 8px 18px;
      background: #00ffcc;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
    }

    iframe {
      flex: 1;
      margin: 0 15px;
      border: 1px solid #30363d;
      border-radius: 6px;
      background: white;
    }

    .console {
      height: 25%;
      margin: 10px 15px 15px;
      background: black;
      border-radius: 6px;
      padding: 10px;
      font-family: monospace;
      font-size: 13px;
      overflow-y: auto;
      border: 1px solid #30363d;
    }

    .console-title {
      color: #00ffcc;
      margin-bottom: 5px;
    }
  </style>
</head>
<body>

<h2>Paste your code here</h2>
<textarea id="codeArea">
<!DOCTYPE html>
<html>
<body style="background:black; color:lime; text-align:center;">
  <h1>Hello GlentechKenya üöÄ</h1>
  <script>
    console.log("Console is connected!");
  </script>
</body>
</html>
</textarea>

<div class="run-area">
  <span>You can run code here</span>
  <button onclick="runCode()">‚ñ∂ Run Code</button>
</div>

<iframe id="preview"></iframe>

<h2>Console</h2>
<div class="console" id="console">
  <div class="console-title">Output:</div>
</div>

<script>
function runCode() {
  const code = document.getElementById("codeArea").value;
  const previewFrame = document.getElementById("preview");
  const consoleDiv = document.getElementById("console");

  consoleDiv.innerHTML = '<div class="console-title">Output:</div>';

  const consoleScript = `
    <script>
      const oldLog = console.log;
      console.log = function(message) {
        parent.postMessage({ type: 'log', message }, '*');
        oldLog(message);
      };
      window.onerror = function(msg) {
        parent.postMessage({ type: 'error', message: msg }, '*');
      };
    <\/script>
  `;

  const finalCode = code.replace("</body>", consoleScript + "</body>");

  const preview = previewFrame.contentWindow.document;
  preview.open();
  preview.write(finalCode);
  preview.close();
}

window.addEventListener("message", function(event) {
  const consoleDiv = document.getElementById("console");

  if (event.data.type === "log") {
    consoleDiv.innerHTML += `<div>> ${event.data.message}</div>`;
  }

  if (event.data.type === "error") {
    consoleDiv.innerHTML += `<div style="color:red;">‚ùå ${event.data.message}</div>`;
  }

  consoleDiv.scrollTop = consoleDiv.scrollHeight;
});
</script>

</body>
</html>
